<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Ktorm | Dialects and Native SQL</title><meta name="keywords" content="Kotlin, ORM, SQL, DSL, sequence"><meta name="description" content=""><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="referrer" content="always"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,500,600,700" rel="stylesheet"><link href="/vendors/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet"><link href="/vendors/docsearch-css@3.6.2/style.css" rel="stylesheet"><link href="/style/doc.css" rel="stylesheet"><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><meta name="generator" content="Hexo 7.3.0"></head><body><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-180275463-1","auto"),ga("send","pageview")</script><script async src="https://www.google-analytics.com/analytics.js"></script><script type="text/javascript">window.__INITIAL_STATE__={page:{title:"Dialects and Native SQL",lang:"en",related_path:"zh-cn/dialects-and-native-sql.html",path:"en/dialects-and-native-sql.html"},data:{"navigation-en":{home:[{title:"Quick Start",link:"en/quick-start.html",color:"purple",icon:"flash",description:"Setting up Ktorm and starting up."},{title:"SQL DSL",link:"en/query.html",color:"blue",icon:"code",description:'Use the strong-typed and flexible <a href="/en/query.html">query DSL</a> after <a href="/en/schema-definition.html">defining table schemas</a>.'},{title:"Entity Sequence",link:"en/entity-sequence.html",color:"green",icon:"line-chart",description:'Obtain entities via <a href="/en/entity-sequence.html">sequence APIs</a> after <a href="/en/entities-and-column-binding.html">column bindings</a> configured.'},{title:"API Documents",link:"api-docs/index.html",target:"_blank",color:"red",icon:"paperclip",description:"API documents for Ktorm's classes and functions."}],main:[{text:"GETTING STARTED",type:"label",isCurrent:!1},{text:"Overview",type:"link",path:"/",isCurrent:!1},{text:"Quick Start",type:"link",path:"en/quick-start.html",isCurrent:!1},{text:"CONNECTION MANAGEMENT",type:"label",isCurrent:!1},{text:"Connect to Databases",type:"link",path:"en/connect-to-databases.html",isCurrent:!1},{text:"Transaction Management",type:"link",path:"en/transaction-management.html",isCurrent:!1},{text:"Spring Support",type:"link",path:"en/spring-support.html",isCurrent:!1},{text:"SQL DSL",type:"label",isCurrent:!1},{text:"Schema Definition",type:"link",path:"en/schema-definition.html",isCurrent:!1},{text:"Query",type:"link",path:"en/query.html",isCurrent:!1},{text:"Joining",type:"link",path:"en/joining.html",isCurrent:!1},{text:"Data Manipulation",type:"link",path:"en/dml.html",isCurrent:!1},{text:"Operators",type:"link",path:"en/operators.html",isCurrent:!1},{text:"Dialects & Native SQL",type:"link",path:"en/dialects-and-native-sql.html",isCurrent:!1},{text:"ENTITY API",type:"label",isCurrent:!1},{text:"Entities & Column Binding",type:"link",path:"en/entities-and-column-binding.html",isCurrent:!1},{text:"Entity Query",type:"link",path:"en/entity-finding.html",isCurrent:!1},{text:"Entity Sequence",type:"link",path:"en/entity-sequence.html",isCurrent:!1},{text:"Sequence Aggregation",type:"link",path:"en/sequence-aggregation.html",isCurrent:!1},{text:"Entity Manipulation",type:"link",path:"en/entity-dml.html",isCurrent:!1},{text:"Define Entities as Any Class",type:"link",path:"en/define-entities-as-any-kind-of-classes.html",isCurrent:!1},{text:"SUPPORT & FEEDBACK",type:"label",isCurrent:!1},{text:"API Documents",type:"support-link",path:"api-docs/index.html",target:"_blank",isCurrent:!1},{text:"Issue Feedback",type:"support-link",path:"https://github.com/kotlin-orm/ktorm/issues/new",target:"_blank",isCurrent:!1},{text:"Sponsor the Project",type:"support-link",path:"en/sponsor.html",isCurrent:!1}]},"navigation-zh-cn":{home:[{title:"快速上手",link:"zh-cn/quick-start.html",color:"purple",icon:"flash",description:"快速配置 Ktorm 并开始使用"},{title:"SQL DSL",link:"zh-cn/query.html",color:"blue",icon:"code",description:'<a href="/zh-cn/schema-definition.html">定义表结构</a>，使用强类型的灵活的<a href="/zh-cn/query.html">查询 DSL</a>'},{title:"实体序列",link:"zh-cn/entity-sequence.html",color:"green",icon:"line-chart",description:'<a href="/zh-cn/entities-and-column-binding.html">配置列绑定</a>，使用<a href="/zh-cn/entity-sequence.html">序列 API</a> 获取实体对象'},{title:"API 文档",link:"api-docs/index.html",target:"_blank",color:"red",icon:"paperclip",description:"查看 Ktorm 中类与函数的 API 文档"}],main:[{text:"开始",type:"label"},{text:"简介",type:"link",path:"zh-cn/"},{text:"快速上手",type:"link",path:"zh-cn/quick-start.html"},{text:"连接管理",type:"label"},{text:"连接数据库",type:"link",path:"zh-cn/connect-to-databases.html"},{text:"事务管理",type:"link",path:"zh-cn/transaction-management.html"},{text:"Spring 支持",type:"link",path:"zh-cn/spring-support.html"},{text:"SQL DSL",type:"label"},{text:"定义表结构",type:"link",path:"zh-cn/schema-definition.html"},{text:"查询",type:"link",path:"zh-cn/query.html"},{text:"联表",type:"link",path:"zh-cn/joining.html"},{text:"增删改",type:"link",path:"zh-cn/dml.html"},{text:"运算符",type:"link",path:"zh-cn/operators.html"},{text:"方言与原生 SQL",type:"link",path:"zh-cn/dialects-and-native-sql.html"},{text:"实体类 API",type:"label"},{text:"实体类与列绑定",type:"link",path:"zh-cn/entities-and-column-binding.html"},{text:"实体查询",type:"link",path:"zh-cn/entity-finding.html"},{text:"实体序列",type:"link",path:"zh-cn/entity-sequence.html"},{text:"序列聚合",type:"link",path:"zh-cn/sequence-aggregation.html"},{text:"实体增删改",type:"link",path:"zh-cn/entity-dml.html"},{text:"使用任意的类作为实体类",type:"link",path:"zh-cn/define-entities-as-any-kind-of-classes.html"},{text:"支持和反馈",type:"label"},{text:"API 文档",type:"support-link",path:"api-docs/index.html",target:"_blank"},{text:"问题反馈",type:"support-link",path:"https://github.com/kotlin-orm/ktorm/issues/new",target:"_blank"},{text:"打赏作者",type:"support-link",path:"zh-cn/sponsor.html"}]}},config:{timezone:null,root:"/",time_format:"HH:mm:ss",theme:"doc"}},window.localStorage&&"true"===window.localStorage.getItem("navigation_collapsed")&&document.getElementsByTagName("body")[0].classList.add("doc-navigation--is-collapsed")</script><div id="navigation-container"><div class="doc-navigation"><nav class="doc-navbar"><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-navbar__sidebar-toggle"></i><span class="doc-navbar__logo"><a href="/"><img src="/images/logo.png" class="doc-navbar__logo__img"><img src="/images/logo-middle.png" class="doc-navbar__logo__img-full"></a></span><i class="dc-icon dc-icon--close dc-icon--interactive doc-sidebar-close doc-navbar__sidebar-close"></i><span class="lang-switcher"><span><img src="/images/us.png"><span>English</span></span><span class="lang-divider"> | </span><span><img src="/images/cn.png"><a href="/zh-cn/dialects-and-native-sql.html">简体中文</a></span></span></nav><nav class="doc-sidebar"><div class="doc-sidebar__vertical-menu"><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-sidebar-toggle--primary doc-sidebar__vertical-menu__item"></i><i class="dc-icon dc-icon--search dc-icon--interactive doc-sidebar__vertical-menu__item doc-sidebar__vertical-menu__item--primary"></i></div><div class="doc-sidebar-content"><div class="doc-sidebar__search-form"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search documents</span></span><span class="DocSearch-Button-Keys"></span></button></div><ul class="doc-sidebar-list"><li class="doc-sidebar-list__item doc-sidebar-list__item--label doc-sidebar-list__item--no-children"><span>GETTING STARTED</span></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/" target="_self"><span>Overview</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/quick-start.html" target="_self"><span>Quick Start</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--label doc-sidebar-list__item--no-children"><span>CONNECTION MANAGEMENT</span></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/connect-to-databases.html" target="_self"><span>Connect to Databases</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/transaction-management.html" target="_self"><span>Transaction Management</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/spring-support.html" target="_self"><span>Spring Support</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--label doc-sidebar-list__item--no-children"><span>SQL DSL</span></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/schema-definition.html" target="_self"><span>Schema Definition</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/query.html" target="_self"><span>Query</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/joining.html" target="_self"><span>Joining</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/dml.html" target="_self"><span>Data Manipulation</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/operators.html" target="_self"><span>Operators</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--current doc-sidebar-list__item--no-children"><a href="/en/dialects-and-native-sql.html" target="_self"><span>Dialects &amp; Native SQL</span></a><ul class="doc-sidebar-list__toc-list"></ul></li><li class="doc-sidebar-list__item doc-sidebar-list__item--label doc-sidebar-list__item--no-children"><span>ENTITY API</span></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/entities-and-column-binding.html" target="_self"><span>Entities &amp; Column Binding</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/entity-finding.html" target="_self"><span>Entity Query</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/entity-sequence.html" target="_self"><span>Entity Sequence</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/sequence-aggregation.html" target="_self"><span>Sequence Aggregation</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/entity-dml.html" target="_self"><span>Entity Manipulation</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/define-entities-as-any-kind-of-classes.html" target="_self"><span>Define Entities as Any Class</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--label doc-sidebar-list__item--no-children"><span>SUPPORT &amp; FEEDBACK</span></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/api-docs/index.html" target="_blank"><span>API Documents</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="https://github.com/kotlin-orm/ktorm/issues/new" target="_blank"><span>Issue Feedback</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link doc-sidebar-list__item--no-children"><a href="/en/sponsor.html" target="_self"><span>Sponsor the Project</span></a></li></ul></div></nav></div></div><div class="doc-content"><div id="lang-switcher-container" class="lang-switcher-container"><span class="lang-switcher"><span><img src="/images/us.png"><span>English</span></span><span class="lang-divider"> | </span><span><img src="/images/cn.png"><a href="/zh-cn/dialects-and-native-sql.html">简体中文</a></span></span></div><div class="dc-page"><div class="dc-card"><article id="page-content" class="doc-formatting"><a class="page-link-to-github" target="_blank" href="https://github.com/kotlin-orm/ktorm-docs/edit/master/source/en/dialects-and-native-sql.md"><i class="icon fa fa-github"></i> <span class="text">Edit Page</span></a><h1 id="dialects-native-sql"><a class="markdownIt-Anchor" href="#dialects-native-sql"></a> Dialects &amp; Native SQL</h1><p>It’s known that there is a uniform standard for SQL language, but beyond the standard, many databases still have their special features. The core module of Ktorm (ktorm-core) only provides support for standard SQL, if we want to use some special features of a database, we need to support dialects.</p><h2 id="enable-dialects"><a class="markdownIt-Anchor" href="#enable-dialects"></a> Enable Dialects</h2><p>In Ktorm, <code>SqlDialect</code> interface is the abstraction of dialects. Ktorm supports many dialects now, each of them is published as a separated module independent of ktorm-core, and they all provide their own implementation of <code>SqlDialect</code>.</p><figure class="table-wrapper"><table><thead><tr><th>Database Name</th><th>Module Name</th><th>SqlDialect Implementation</th></tr></thead><tbody><tr><td>MySQL</td><td>ktorm-support-mysql</td><td>org.ktorm.support.mysql.MySqlDialect</td></tr><tr><td>PostgreSQL</td><td>ktorm-support-postgresql</td><td>org.ktorm.support.postgresql.PostgreSqlDialect</td></tr><tr><td>SQLite</td><td>ktorm-support-sqlite</td><td>org.ktorm.support.sqlite.SQLiteDialect</td></tr><tr><td>SqlServer</td><td>ktorm-support-sqlserver</td><td>org.ktorm.support.sqlserver.SqlServerDialect</td></tr><tr><td>Oracle</td><td>ktorm-support-oracle</td><td>org.ktorm.support.oracle.OracleDialect</td></tr></tbody></table></figure><p>Now let’s take MySQL’s <code>on duplicate key update</code> feature as an example, learning how to enable dialects in Ktorm.</p><p>This feature can determine if there is a conflict while records are being inserted into databases, and automatically performs updates if any conflict exists, which is not supported by standard SQL. To use this feature, we need to add the dependency of ktorm-support-mysql to our projects. If we are using Maven:</p><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.ktorm<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ktorm-support-mysql<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>$</span><span class="template-variable">&#123;ktorm.version&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>Or Gradle:</p><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">&quot;org.ktorm:ktorm-support-mysql:$&#123;ktorm.version&#125;&quot;</span></span><br></pre></td></tr></table></figure><p>Having the dependency, we also need to modify the calling of the <code>Database.connect</code> function, this function is used to create <code>Database</code> objects. We need to specify its <code>dialect</code> parameter, telling Ktorm which <code>SqlDialect</code> implementation should be used.</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> database = Database.connect(</span><br><span class="line">    url = <span class="string">&quot;jdbc:mysql://localhost:3306/ktorm&quot;</span>, </span><br><span class="line">    driver = <span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>, </span><br><span class="line">    user = <span class="string">&quot;root&quot;</span>, </span><br><span class="line">    password = <span class="string">&quot;***&quot;</span>, </span><br><span class="line">    dialect = MySqlDialect()</span><br><span class="line">)</span><br></pre></td></tr></table></figure><blockquote><p>Since version 2.4, Ktorm’s dialect modules start following the convention of JDK <code>ServiceLoader</code> SPI, so we don’t need to specify the <code>dialect</code> parameter explicitly anymore while creating <code>Database</code> instances. Ktorm auto detects one for us from the classpath. We just need to insure the dialect module exists in the dependencies.</p></blockquote><p>Now we have enabled MySQL’s dialect implementation and all of its features are available. Try to call the <code>insertOrUpdate</code> function:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">database.insertOrUpdate(Employees) &#123;</span><br><span class="line">    <span class="keyword">set</span>(it.id, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">set</span>(it.name, <span class="string">&quot;vince&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(it.job, <span class="string">&quot;engineer&quot;</span>)</span><br><span class="line">    <span class="keyword">set</span>(it.salary, <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">set</span>(it.hireDate, LocalDate.now())</span><br><span class="line">    <span class="keyword">set</span>(it.departmentId, <span class="number">1</span>)</span><br><span class="line">    onDuplicateKey &#123;</span><br><span class="line">        <span class="keyword">set</span>(it.salary, it.salary + <span class="number">900</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Generated SQL:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_employee (id, name, job, salary, hire_date, department_id) <span class="keyword">values</span> (?, ?, ?, ?, ?, ?) </span><br><span class="line"><span class="keyword">on</span> duplicate key <span class="keyword">update</span> salary <span class="operator">=</span> salary <span class="operator">+</span> ? </span><br></pre></td></tr></table></figure><p>Perfect！</p><h2 id="built-in-dialects-features"><a class="markdownIt-Anchor" href="#built-in-dialects-features"></a> Built-in Dialects’ Features</h2><p>Now, let’s talk about Ktorm’s built-in dialects’ features.</p><p><strong>ktorm-support-mysql</strong>:</p><ul><li>Support standard pagination functions of Ktorm, translating to MySQL’s <code>limit ?, ?</code> clause.</li><li>Support extended syntax for insert statements, like <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/insert-or-update.html">insertOrUpdate</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/bulk-insert.html">bulkInsert</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/bulk-insert-or-update.html">bulkInsertOrUpdate</a>, etc.</li><li>Support locking clause via <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/locking.html">locking</a> function, eg. <code>select ... for update</code>.</li><li>Support fulltext search via <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/match.html">match</a> and <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/against.html">against</a> functions.</li><li>Support some common-used JSON operating functions, like <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/json-contains.html">jsonContains</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/json-extract.html">jsonExtract</a>.</li><li>Support some common-used functions like <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/-i-f.html">IF</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/if-null.html">ifNull</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/greatest.html">greatest</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/least.html">least</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/replace.html">replace</a>, etc.</li><li>For more functionality, please refer to the API docs <a href="https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/index.html">https://www.ktorm.org/api-docs/ktorm-support-mysql/org.ktorm.support.mysql/index.html</a></li></ul><p><strong>ktorm-support-postgresql</strong>:</p><ul><li>Support standard pagination functions of Ktorm, translating to PostgreSQL’s <code>limit ? offset ?</code> clause.</li><li>Support extended syntax for insert statements, like <a href="https://www.ktorm.org/api-docs/ktorm-support-postgresql/org.ktorm.support.postgresql/insert-returning.html">insertReturning</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-postgresql/org.ktorm.support.postgresql/insert-or-update.html">insertOrUpdate</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-postgresql/org.ktorm.support.postgresql/bulk-insert.html">bulkInsert</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-postgresql/org.ktorm.support.postgresql/bulk-insert-or-update.html">bulkInsertOrUpdate</a>, etc.</li><li>Support locking clause via <a href="https://www.ktorm.org/api-docs/ktorm-support-postgresql/org.ktorm.support.postgresql/locking.html">locking</a> function, eg. <code>select ... for update</code>.</li><li>Support <a href="https://www.ktorm.org/api-docs/ktorm-support-postgresql/org.ktorm.support.postgresql/hstore.html">hstore</a> data type and a series of operators for it.</li><li>Support <a href="https://www.ktorm.org/api-docs/ktorm-support-postgresql/org.ktorm.support.postgresql/cube.html">cube</a> &amp; <a href="https://www.ktorm.org/api-docs/ktorm-support-postgresql/org.ktorm.support.postgresql/earth.html">earth</a> data type and their utility functions.</li><li>For more functionality, please refer to the API docs <a href="https://www.ktorm.org/api-docs/ktorm-support-postgresql/org.ktorm.support.postgresql/index.html">https://www.ktorm.org/api-docs/ktorm-support-postgresql/org.ktorm.support.postgresql/index.html</a></li></ul><p><strong>ktorm-support-sqlite</strong>:</p><ul><li>Support standard pagination functions of Ktorm, translating to SQLite’s <code>limit ?, ?</code> statement.</li><li>Support extended syntax for insert statements, like <a href="https://www.ktorm.org/api-docs/ktorm-support-sqlite/org.ktorm.support.sqlite/insert-or-update.html">insertOrUpdate</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-sqlite/org.ktorm.support.sqlite/bulk-insert.html">bulkInsert</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-sqlite/org.ktorm.support.sqlite/bulk-insert-or-update.html">bulkInsertOrUpdate</a>, etc.</li><li>Support some common-used JSON operating functions, like <a href="https://www.ktorm.org/api-docs/ktorm-support-sqlite/org.ktorm.support.sqlite/json-extract.html">jsonExtract</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-sqlite/org.ktorm.support.sqlite/json-patch.html">jsonPatch</a>.</li><li>Support some common-used functions like <a href="https://www.ktorm.org/api-docs/ktorm-support-sqlite/org.ktorm.support.sqlite/iif.html">iif</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-sqlite/org.ktorm.support.sqlite/if-null.html">ifNull</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-sqlite/org.ktorm.support.sqlite/instr.html">instr</a>, <a href="https://www.ktorm.org/api-docs/ktorm-support-sqlite/org.ktorm.support.sqlite/replace.html">replace</a>, etc.</li><li>For more functionality, please refer to the API docs <a href="https://www.ktorm.org/api-docs/ktorm-support-sqlite/org.ktorm.support.sqlite/index.html">https://www.ktorm.org/api-docs/ktorm-support-sqlite/org.ktorm.support.sqlite/index.html</a></li></ul><p><strong>ktorm-support-sqlserver</strong>:</p><ul><li>Support standard pagination functions of Ktorm, translating to SqlServer’s paging SQL using <code>top</code> and <code>row_number over(...)</code></li><li>Support <a href="https://www.ktorm.org/api-docs/ktorm-support-sqlserver/org.ktorm.support.sqlserver/datetimeoffset.html">datetimeoffset</a> data type.</li><li>For more functionality, please refer to the API docs <a href="https://www.ktorm.org/api-docs/ktorm-support-sqlserver/org.ktorm.support.sqlserver/index.html">https://www.ktorm.org/api-docs/ktorm-support-sqlserver/org.ktorm.support.sqlserver/index.html</a></li></ul><p><strong>ktorm-support-oracle</strong>:</p><ul><li>Support standard pagination functions of Ktorm, translating to Oracle’s paging SQL using <code>rownum</code>.</li><li>For more functionality, please refer to the API docs <a href="https://www.ktorm.org/api-docs/ktorm-support-oracle/org.ktorm.support.oracle/index.html">https://www.ktorm.org/api-docs/ktorm-support-oracle/org.ktorm.support.oracle/index.html</a></li></ul><p>To be honest, Ktorm’s support for special syntax of many database dialects is really not enough. This is because my time and energy are really limited, so I have to lower the precedence of some infrequently used dialect features.</p><p>However, the standard SQL supported by the core module is enough for most scenarios, so there is little influence on us even if some dialect features are lacking.</p><p>Ktorm’s design is open, it’s easy to add features to it, and we have learned how to write our own extensions in the former sections, so it’s possible for everyone to implement dialects by themselves. Welcome to fork the repository and send your pull requests to me, I’m glad to review and merge your code. Looking forward to your contributions!</p><h2 id="native-sql"><a class="markdownIt-Anchor" href="#native-sql"></a> Native SQL</h2><p>In some rare situations, we have to face some special businesses that Ktorm may not be able to support now, such as some complex queries (eg. correlated subqueries), special features of a dialect (eg. SQL Server’s cross apply), or DDL that operates the table schemas.</p><p>To solve the problem, Ktorm provides a way for us to execute native SQLs directly. We need to obtain a database connection via <code>database.useConnection</code> first, then perform our operations by writing some code with JDBC. Here is an example:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> names = database.useConnection &#123; conn -&gt;</span><br><span class="line">    <span class="keyword">val</span> sql = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        select name from t_employee</span></span><br><span class="line"><span class="string">        where department_id = ?</span></span><br><span class="line"><span class="string">        order by id</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    conn.prepareStatement(sql).use &#123; statement -&gt;</span><br><span class="line">        statement.setInt(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        statement.executeQuery().asIterable().map &#123; it.getString(<span class="number">1</span>) &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">names.forEach &#123; println(it) &#125;</span><br></pre></td></tr></table></figure><p>At first glance, there are only boilerplate JDBC code in the example, but actually, it’s also benefited from some convenient functions of Ktorm:</p><ul><li><code>useConnection</code> function is used to obtain or create connections. If the current thread has opened a transaction, then this transaction’s connection will be passed to the closure. Otherwise, Ktorm will pass a new-created connection to the closure and auto close it after it’s not useful anymore. Ktorm also uses this function to obtain connections to execute generated SQLs. So, by calling <code>useConnection</code>, we can share the transactions or connection pools with Ktorm’s internal SQLs.</li><li><code>asIterable</code> function is used to wrap <code>ResultSet</code> instances as <code>Iterable</code>, then we can iterate the result sets by for-each loops, or process them via extension functions of Kotlin standard lib, such as <code>map</code>, <code>flatMap</code>, etc.</li></ul><blockquote><p>Note: Although Ktorm provides supports for native SQLs, we don’t recommend you to use it, because it violates the design philosophy of Ktorm. Once native SQL is used, we will lose the benefits of the strong typed DSL, so please ensure whether it’s really necessary to do that. In general, most complex SQLs can be converted to equivalent simple joining queries, and most special keywords and SQL functions can also be implemented by writing some extensions with Ktorm.</p></blockquote><div id="support-footer-container"><div class="doc-support-footer"><div class="doc-footer-link">Prev Article: <a href="/en/operators.html">Operators</a></div><div class="doc-footer-link">Next Article: <a href="/en/entities-and-column-binding.html">Entities &amp; Column Binding</a></div>Any questions about the document? Try searching again on the left menu or <a href="https://github.com/kotlin-orm/ktorm/issues/new">raise an issue on GitHub</a></div></div></article></div></div><div class="doc-footer">&copy; 2025 KTORM.ORG. Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a><br>Hosted by <a href="https://github.com/kotlin-orm/ktorm">GitHub</a> <a href="https://github.com/kotlin-orm/ktorm/stargazers"><img src="https://img.shields.io/github/stars/kotlin-orm/ktorm.svg?style=social" alt="Stars"></a></div></div><script src="/vendors/jquery@3.2.1/jquery.min.js"></script><script src="/script/doc.js"></script></body></html>