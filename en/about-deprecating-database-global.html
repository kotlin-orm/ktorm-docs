<!-- build time:Fri Apr 02 2021 23:05:04 GMT+0800 (China Standard Time) --><!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><title>Ktorm | About Deprecating Database.global</title><meta name="keywords" content="Kotlin, ORM, SQL, DSL, sequence"><meta name="description" content=""><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="referrer" content="always"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,500,600,700" rel="stylesheet"><link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"><link href="/style/doc.css" rel="stylesheet"><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"></head><body><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-180275463-1","auto"),ga("send","pageview")</script><script async src="https://www.google-analytics.com/analytics.js"></script><script type="text/javascript">window.__INITIAL_STATE__={page:{title:"About Deprecating Database.global",lang:"en",related_path:"zh-cn/about-deprecating-database-global.html",path:"en/about-deprecating-database-global.html"},data:{"navigation-zh-cn":{home:[{title:"快速开始",link:"zh-cn/quick-start.html",color:"purple",icon:"flash",description:"快速配置 Ktorm 并开始使用"},{title:"SQL DSL",link:"zh-cn/query.html",color:"blue",icon:"code",description:'<a href="/zh-cn/schema-definition.html">定义表结构</a>，使用强类型的灵活的<a href="/zh-cn/query.html">查询 DSL</a>'},{title:"实体序列",link:"zh-cn/entity-sequence.html",color:"green",icon:"line-chart",description:'<a href="/zh-cn/entities-and-column-binding.html">配置列绑定</a>，使用<a href="/zh-cn/entity-sequence.html">序列 API</a> 获取实体对象'},{title:"API 文档",link:"api-docs/index.html",color:"red",icon:"paperclip",description:"查看 Ktorm 中类与函数的 API 文档"}],main:[{text:"概述",type:"link",path:"zh-cn/"},{text:"快速开始",type:"link",path:"zh-cn/quick-start.html"},{text:"连接管理",type:"label"},{text:"连接数据库",type:"link",path:"zh-cn/connect-to-databases.html"},{text:"事务管理",type:"link",path:"zh-cn/transaction-management.html"},{text:"Spring 支持",type:"link",path:"zh-cn/spring-support.html"},{text:"SQL DSL",type:"label"},{text:"定义表结构",type:"link",path:"zh-cn/schema-definition.html"},{text:"查询",type:"link",path:"zh-cn/query.html"},{text:"联表",type:"link",path:"zh-cn/joining.html"},{text:"增删改",type:"link",path:"zh-cn/dml.html"},{text:"运算符",type:"link",path:"zh-cn/operators.html"},{text:"方言与原生 SQL",type:"link",path:"zh-cn/dialects-and-native-sql.html"},{text:"实体类 API",type:"label"},{text:"实体类与列绑定",type:"link",path:"zh-cn/entities-and-column-binding.html"},{text:"实体查询",type:"link",path:"zh-cn/entity-finding.html"},{text:"实体序列",type:"link",path:"zh-cn/entity-sequence.html"},{text:"序列聚合",type:"link",path:"zh-cn/sequence-aggregation.html"},{text:"实体增删改",type:"link",path:"zh-cn/entity-dml.html"},{text:"使用任意的类作为实体类",type:"link",path:"zh-cn/define-entities-as-any-kind-of-classes.html"},{text:"支持和反馈",type:"label"},{text:"API 文档",type:"support-link",path:"api-docs/index.html"},{text:"问题反馈",type:"support-link",path:"https://github.com/kotlin-orm/ktorm/issues/new"},{text:"打赏作者",type:"support-link",path:"zh-cn/sponsor.html"}]},"navigation-en":{home:[{title:"Quick Start",link:"en/quick-start.html",color:"purple",icon:"flash",description:"Setting up Ktorm and starting up."},{title:"SQL DSL",link:"en/query.html",color:"blue",icon:"code",description:'Use the strong-typed and flexible <a href="/en/query.html">query DSL</a> after <a href="/en/schema-definition.html">defining table schemas</a>.'},{title:"Entity Sequence",link:"en/entity-sequence.html",color:"green",icon:"line-chart",description:'Obtain entities via <a href="/en/entity-sequence.html">sequence APIs</a> after <a href="/en/entities-and-column-binding.html">column bindings</a> configured.'},{title:"API Documents",link:"api-docs/index.html",color:"red",icon:"paperclip",description:"API documents for Ktorm's classes and functions."}],main:[{text:"Overview",type:"link",path:"",isCurrent:!1},{text:"Quick Start",type:"link",path:"en/quick-start.html",isCurrent:!1},{text:"CONNECTION MANAGEMENT",type:"label",isCurrent:!1},{text:"Connect to Databases",type:"link",path:"en/connect-to-databases.html",isCurrent:!1},{text:"Transaction Management",type:"link",path:"en/transaction-management.html",isCurrent:!1},{text:"Spring Support",type:"link",path:"en/spring-support.html",isCurrent:!1},{text:"SQL DSL",type:"label",isCurrent:!1},{text:"Schema Definition",type:"link",path:"en/schema-definition.html",isCurrent:!1},{text:"Query",type:"link",path:"en/query.html",isCurrent:!1},{text:"Joining",type:"link",path:"en/joining.html",isCurrent:!1},{text:"Data Manipulation",type:"link",path:"en/dml.html",isCurrent:!1},{text:"Operators",type:"link",path:"en/operators.html",isCurrent:!1},{text:"Dialects & Native SQL",type:"link",path:"en/dialects-and-native-sql.html",isCurrent:!1},{text:"ENTITY API",type:"label",isCurrent:!1},{text:"Entities & Column Binding",type:"link",path:"en/entities-and-column-binding.html",isCurrent:!0},{text:"Entity Query",type:"link",path:"en/entity-finding.html",isCurrent:!1},{text:"Entity Sequence",type:"link",path:"en/entity-sequence.html",isCurrent:!1},{text:"Sequence Aggregation",type:"link",path:"en/sequence-aggregation.html",isCurrent:!1},{text:"Entity Manipulation",type:"link",path:"en/entity-dml.html",isCurrent:!1},{text:"Define Entities as Any Class",type:"link",path:"en/define-entities-as-any-kind-of-classes.html",isCurrent:!1},{text:"SUPPORT & FEEDBACK",type:"label",isCurrent:!1},{text:"API Documents",type:"support-link",path:"api-docs/index.html",isCurrent:!1},{text:"Issue Feedback",type:"support-link",path:"https://github.com/kotlin-orm/ktorm/issues/new",isCurrent:!1},{text:"Sponsor the Project",type:"support-link",path:"en/sponsor.html",isCurrent:!1}]}},config:{timezone:null,root:"/",time_format:"HH:mm:ss",theme:"doc",algolia:{appId:"2W81KMSLOD",apiKey:"2a146a809de068d9b7a07ba3fb70b4e5",indexName:"ktorm",chunkSize:5e3,fields:["title","lang","date","updated","_content:truncate,0,5200","path","permalink"]}}},window.localStorage&&"true"===window.localStorage.getItem("navigation_collapsed")&&document.getElementsByTagName("body")[0].classList.add("doc-navigation--is-collapsed")</script><div id="navigation-container"><div class="doc-navigation" data-reactroot=""><nav class="doc-navbar"><span class="doc-navbar__logo"><a href="/"><img src="/images/logo.png" class="doc-navbar__logo__img"><img src="/images/logo-middle.png" class="doc-navbar__logo__img-full"></a></span><i class="dc-icon dc-icon--close dc-icon--interactive doc-sidebar-close doc-navbar__sidebar-close doc-navbar__sidebar-close--desktop"></i><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-navbar__sidebar-toggle"></i><span class="lang-switcher"><span><img src="/images/us.png"><span>English</span></span><span class="lang-divider"> | </span><span><img src="/images/cn.png"><a href="/zh-cn/about-deprecating-database-global.html">简体中文</a></span></span></nav><nav class="doc-sidebar"><div class="doc-sidebar__vertical-menu"><i class="dc-icon dc-icon--menu dc-icon--interactive doc-sidebar-toggle doc-sidebar-toggle--primary doc-sidebar__vertical-menu__item"></i><i class="dc-icon dc-icon--search dc-icon--interactive doc-sidebar__vertical-menu__item doc-sidebar__vertical-menu__item--primary"></i></div><div class="doc-sidebar-content"><div class="doc-sidebar__search-form"><div class="dc-search-form doc-search-form"><input type="search" id="doc-search-input" class="dc-input dc-search-form__input doc-search-form__input" placeholder="Search documents" autofocus><button class="dc-btn dc-search-form__btn doc-search-form__btn" aria-label="Search"><i class="dc-icon dc-icon--search"></i></button></div></div><ul class="doc-sidebar-list"><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/" target="_self"><span>Overview</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/quick-start.html" target="_self"><span>Quick Start</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--label"><span>CONNECTION MANAGEMENT</span></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/connect-to-databases.html" target="_self"><span>Connect to Databases</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/transaction-management.html" target="_self"><span>Transaction Management</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/spring-support.html" target="_self"><span>Spring Support</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--label"><span>SQL DSL</span></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/schema-definition.html" target="_self"><span>Schema Definition</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/query.html" target="_self"><span>Query</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/joining.html" target="_self"><span>Joining</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/dml.html" target="_self"><span>Data Manipulation</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/operators.html" target="_self"><span>Operators</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/dialects-and-native-sql.html" target="_self"><span>Dialects &amp; Native SQL</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--label"><span>ENTITY API</span></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/entities-and-column-binding.html" target="_self"><span>Entities &amp; Column Binding</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/entity-finding.html" target="_self"><span>Entity Query</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/entity-sequence.html" target="_self"><span>Entity Sequence</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/sequence-aggregation.html" target="_self"><span>Sequence Aggregation</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/entity-dml.html" target="_self"><span>Entity Manipulation</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/define-entities-as-any-kind-of-classes.html" target="_self"><span>Define Entities as Any Class</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--label"><span>SUPPORT &amp; FEEDBACK</span></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/api-docs/index.html" target="_self"><span>API Documents</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="https://github.com/kotlin-orm/ktorm/issues/new" target="_self"><span>Issue Feedback</span></a></li><li class="doc-sidebar-list__item doc-sidebar-list__item--link"><a href="/en/sponsor.html" target="_self"><span>Sponsor the Project</span></a></li></ul></div></nav></div></div><div class="doc-content"><div id="lang-switcher-container" class="lang-switcher-container"><span class="lang-switcher" data-reactroot=""><span><img src="/images/us.png"><span>English</span></span><span class="lang-divider"> | </span><span><img src="/images/cn.png"><a href="/zh-cn/about-deprecating-database-global.html">简体中文</a></span></span></div><div class="dc-page"><div class="dc-card"><div id="doc-search-results" class="doc-search-results"><div id="doc-search-stats"></div><div id="doc-search-hits"></div><div id="doc-search-pagination"></div></div><article id="page-content" class="doc-formatting"><a class="page-link-to-github" target="_blank" href="https://github.com/kotlin-orm/ktorm-docs/edit/master/source/en/about-deprecating-database-global.md"><i class="icon fa fa-github"></i> <span class="text">Edit Page</span></a><h1 id="About-Deprecating-Database-global"><a href="#About-Deprecating-Database-global" class="headerlink" title="About Deprecating Database.global"></a>About Deprecating Database.global</h1><p>In Ktorm 2.7, we did a refactoring of the code. This refactoring deprecated <code>Database.global</code> and a series of functions implemented based on it, making Ktorm’s API design more intuitive and easier to extend.</p><h2 id="Why"><a href="#Why" class="headerlink" title="Why?"></a>Why?</h2><p>In previous versions, <code>Database.connect</code> function saved the latest created <code>Database</code> instance to a global variable automatically, then the framework would obtain it via <code>Database.global</code> when needed.</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Database.global.useConnection &#123; conn -&gt; </span><br><span class="line">    <span class="comment">// Do something with the connection...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>But sometimes, we have to operate many databases in one App, so it’s needed to create many <code>Database</code> instances and choose one while performing our database specific operations.</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> mysql = Database.connect(<span class="string">"jdbc:mysql://localhost:3306/ktorm"</span>)</span><br><span class="line"><span class="keyword">val</span> h2 = Database.connect(<span class="string">"jdbc:h2:mem:ktorm;DB_CLOSE_DELAY=-1"</span>)</span><br><span class="line"></span><br><span class="line">mysql &#123;</span><br><span class="line">    <span class="comment">// Obtain all employees in MySQL database.</span></span><br><span class="line">    <span class="keyword">for</span> (employee <span class="keyword">in</span> Employees.asSequence()) &#123;</span><br><span class="line">        println(employee)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">h2 &#123;</span><br><span class="line">    <span class="comment">// Obtain all employees in H2 database.</span></span><br><span class="line">    <span class="keyword">for</span> (employee <span class="keyword">in</span> Employees.asSequence()) &#123;</span><br><span class="line">        println(employee)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Here, we use the <code>db { }</code> syntax to switch between databases, but now it seems that this is not a good design for the following reasons:</p><ul><li><code>db { }</code> is implemented using <code>ThreadLocal</code>. Switching databases in this way is too implicit, which may lead to some misunderstandings and unexpected bugs, for example <a href="https://github.com/kotlin-orm/ktorm/issues/65" target="_blank" rel="noopener">#65</a> and <a href="https://github.com/kotlin-orm/ktorm/issues/27" target="_blank" rel="noopener">#27</a>.</li><li>Using global variables is a bad design pattern. Code written in this way will be coupled with some global states, which is difficult to be tested and extended. Related discussions are <a href="https://github.com/kotlin-orm/ktorm/issues/47" target="_blank" rel="noopener">#47</a> and <a href="https://github.com/kotlin-orm/ktorm/issues/41" target="_blank" rel="noopener">#41</a>.</li></ul><h2 id="Changes"><a href="#Changes" class="headerlink" title="Changes"></a>Changes</h2><p>Our main goal of this refactoring is to deprecate the global variable <code>Database.global</code> and a series of APIs implemented based on it, making users explicitly specify the <code>Database</code> instances to use while performing database operations, instead of implicitly use <code>Database.global</code>.</p><p>In previous versions, although <code>Database.connect</code> returns a new created <code>Database</code> object, we usually ignore it because Ktorm automatically saves it to an internal global variable. But now, we have to define a variable by ourselves to hold the return value:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> database = Database.connect(<span class="string">"jdbc:mysql://localhost:3306/ktorm"</span>, user = <span class="string">"root"</span>, password = <span class="string">"***"</span>)</span><br></pre></td></tr></table></figure><p>We used to create queries by the extension function <code>Table.select</code> before:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Old API</span></span><br><span class="line"><span class="keyword">for</span> (row <span class="keyword">in</span> Employees.select()) &#123;</span><br><span class="line">    println(row[Employees.name])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>This query uses <code>Database.global</code>, obtaining all records from <code>Employees</code> table, which is indeed very implicit as you can see. Now we have to specify the database instance explicitly and use the syntax of <code>database.from(..).select(..)</code> to create queries:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (row <span class="keyword">in</span> database.from(Employees).select()) &#123;</span><br><span class="line">    println(row[Employees.name])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Here is another example:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> t = Employees.aliased(<span class="string">"t"</span>)</span><br><span class="line">database</span><br><span class="line">    .from(t)</span><br><span class="line">    .select(t.departmentId, avg(t.salary))</span><br><span class="line">    .groupBy(t.departmentId)</span><br><span class="line">    .having &#123; avg(t.salary) greater <span class="number">100.0</span> &#125;</span><br><span class="line">    .forEach &#123; row -&gt; </span><br><span class="line">        println(<span class="string">"<span class="subst">$&#123;row.getInt(<span class="number">1</span>)&#125;</span>:<span class="subst">$&#123;row.getDouble(<span class="number">2</span>)&#125;</span>"</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>It can be seen that the changes of SQL DSL are very simple, we just need to change the syntax from <code>Table.select</code> to <code>database.from(..).select(..)</code>. As for sequence APIs, we used to create sequence objects via <code>asSequence</code> before, and now we just need to change it to <code>sequenceOf</code>. For example:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> employees = database.sequenceOf(Employees).toList()</span><br></pre></td></tr></table></figure><p>Another example using <code>sequenceOf</code>:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> employees = database</span><br><span class="line">    .sequenceOf(Employees)</span><br><span class="line">    .filter &#123; it.departmentId eq <span class="number">1</span> &#125;</span><br><span class="line">    .filter &#123; it.managerId.isNotNull() &#125;</span><br><span class="line">    .sortedBy &#123; it.salary &#125;</span><br><span class="line">    .toList()</span><br></pre></td></tr></table></figure><p>These are the two most significant changes in this refactoring. The documents on Ktorm’s official website have now been updated for version 2.7. You can refer to the latest documents for what you are interested in.</p><p>Attached below is a list of deprecated APIs. These APIs are still available in version 2.7, but they have been marked as <code>@Deprecated</code> and will be completely removed in the future.</p><table><thead><tr><th>Deprecated Usages</th><th>New Usages</th></tr></thead><tbody><tr><td>Database.global</td><td>-</td></tr><tr><td>Employees.select()</td><td>database.from(Employees).select()</td></tr><tr><td>Employees.xxxJoin(Departments)</td><td>database.from(Employees).xxxJoin(Departments)</td></tr><tr><td>Employees.joinReferencesAndSelect()</td><td>database.from(Employees).joinReferencesAndSelect()</td></tr><tr><td>Employees.createEntityWithoutReferences(row)</td><td>Employees.createEntity(row, withReferences = false)</td></tr><tr><td>Employees.asSequence()</td><td>database.sequenceOf(Employees)</td></tr><tr><td>Employees.asSequenceWithoutReferences()</td><td>database.sequenceOf(Employees, withReferences = false)</td></tr><tr><td>Employees.findList { .. }</td><td>database.sequenceOf(Employees).filter { .. }.toList()</td></tr><tr><td>Employees.findAll()</td><td>database.sequenceOf(Employees).toList()</td></tr><tr><td>Employees.findOne { .. }</td><td>database.sequenceOf(Employees).find { .. }</td></tr><tr><td>Employees.findById(id)</td><td>database.sequenceOf(Employees).find { it.id eq id }</td></tr><tr><td>Employees.findListByIds(ids)</td><td>database.sequenceOf(Employees).filter { it.id inList ids }.toList()</td></tr><tr><td>Employees.findMapByIds(ids)</td><td>database.sequenceOf(Employees).filter { it.id inList ids }.associateBy { it.id }</td></tr><tr><td>Employees.update { .. }</td><td>database.update(Employees) { .. }</td></tr><tr><td>Employees.batchUpdate { .. }</td><td>database.batchUpdate(Employees) { .. }</td></tr><tr><td>Employees.insert { .. }</td><td>database.insert(Employees) { .. }</td></tr><tr><td>Employees.batchInsert { .. }</td><td>database.batchInsert(Employees) { .. }</td></tr><tr><td>Employees.insertAndGenerateKey { .. }</td><td>database.insertAndGenerateKey(Employees) { .. }</td></tr><tr><td>Employees.delete { .. }</td><td>database.delete(Employees) { .. }</td></tr><tr><td>Employees.deleteAll()</td><td>database.deleteAll(Employees)</td></tr><tr><td>Employees.add(entity)</td><td>database.sequenceOf(Employees).add(entity)</td></tr><tr><td>Employees.all { .. }</td><td>database.sequenceOf(Employees).all { .. }</td></tr><tr><td>Employees.any { .. }</td><td>database.sequenceOf(Employees).any { .. }</td></tr><tr><td>Employees.none { .. }</td><td>database.sequenceOf(Employees).none { .. }</td></tr><tr><td>Employees.count { .. }</td><td>database.sequenceOf(Employees).count { .. }</td></tr><tr><td>Employees.sumBy { .. }</td><td>database.sequenceOf(Employees).sumBy { .. }</td></tr><tr><td>Employees.maxBy { .. }</td><td>database.sequenceOf(Employees).maxBy { .. }</td></tr><tr><td>Employees.minBy { .. }</td><td>database.sequenceOf(Employees).minBy { .. }</td></tr><tr><td>Employees.averageBy { .. }</td><td>database.sequenceOf(Employees).averageBy { .. }</td></tr></tbody></table><h2 id="ktorm-global"><a href="#ktorm-global" class="headerlink" title="ktorm-global"></a>ktorm-global</h2><p>These deprecated APIs will be completely removed in a future Ktorm 3.0 release. However, they also have some advantages, as we can make some APIs more concise with the help of the global variable. In order to meet the needs of as many users as possible, we will add a module named ktorm-global in Ktorm 3.0.</p><p>At that time, APIs deprecated in version 2.7 will be reimplemented in the ktorm-global module. This module will serve as an extension of Ktorm and provide more concise APIs based on a global variable. In this way, Ktorm’s core module can completely remove those deprecated APIs, and if you want to use them, just need to add an extra dependency of ktorm-global. Hope we can find the right balance by adding this module. Stay tuned!!</p><blockquote><p>The ktorm-global module has been released, please see <a href="./break-changes-in-ktorm-3.0.html">Break Changes in Ktorm 3.0</a>.</p></blockquote><div id="support-footer-container"><div class="doc-support-footer" data-reactroot="">Any questions about the document? Try searching again on the left menu or <a href="https://github.com/kotlin-orm/ktorm/issues/new" target="_blank" rel="noopener">Raise an issue on Github</a></div></div></article></div></div><div class="doc-footer">&copy; 2021 KTORM.ORG. Licensed under <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank" rel="noopener">Apache 2.0</a><br>Hosted by <a href="https://github.com/kotlin-orm/ktorm" target="_blank" rel="noopener">GitHub</a> <a href="https://github.com/kotlin-orm/ktorm/stargazers" target="_blank" rel="noopener"><img src="https://img.shields.io/github/stars/kotlin-orm/ktorm.svg?style=social" alt="Stars"></a></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js"></script><script src="/script/doc.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript">docsearch({apiKey:"8cd6a3b7dc33b50b89c7e9b11110717a",indexName:"ktorm",inputSelector:"#doc-search-input",algoliaOptions:{facetFilters:["lang:en","tags:doc"]},autocompleteOptions:{hint:!1,appendTo:"body"},debug:!1})</script><script>!function(){$(".kotlin .code .keyword").each(function(){var e=$(this);("where"===e.text()||"set"===e.text())&&e.removeClass("keyword")})}()</script></body></html><!-- rebuild by neat -->